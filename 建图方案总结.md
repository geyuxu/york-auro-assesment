# AURO2025 建图方案总结

## 📋 可用方案

经过测试和优化，目前提供 **两种** 建图方案：

---

## 1. 手动建图（强烈推荐）⭐⭐⭐⭐⭐

### 优点
- ✅ **最快速** - 3-5 分钟完成
- ✅ **最可靠** - 不会撞墙或掉出地图
- ✅ **质量最高** - 完全可控，精确覆盖
- ✅ **最简单** - 只需要会用键盘

### 使用指南
查看：[正确的建图步骤.md](正确的建图步骤.md)

### 快速命令
查看：[建图命令.sh](建图命令.sh)

```bash
./建图命令.sh  # 显示所有命令
```

### 核心步骤
1. 启动仿真 + SLAM
2. 手动遥控机器人
3. 系统化覆盖环境
4. 保存地图

---

## 2. LLM 智能建图（OpenAI API）🤖

### 优点
- ✅ **AI 驱动** - 使用大语言模型决策
- ✅ **无需 GPU** - 适合 Docker 环境
- ✅ **响应极快** - ~200ms 决策延迟
- ✅ **成本极低** - 单次建图 < 1 分钱
- ✅ **智能决策** - 理解环境上下文
- ✅ **自适应** - 根据情况调整策略

### 要求
- ⚙️ 需要 API Key（OpenAI/DeepSeek/通义千问）
- ⚙️ 需要网络连接
- ⚙️ 时间约 10 分钟

### 使用指南
- 详细配置：[LLM建图-OpenAI配置.md](LLM建图-OpenAI配置.md)
- 完整指南：[LLM智能建图指南.md](LLM智能建图指南.md)

### 推荐 API 提供商
1. **OpenAI gpt-4o-mini** - 最快最稳定（~$0.001/次）
2. **DeepSeek** - 国内友好（~¥0.006/次）
3. **通义千问** - 有免费额度

### 适合人群
- 想尝试 AI 技术
- 有 API Key 或愿意获取
- Docker 环境无 GPU
- 追求智能决策质量

---

## ❌ 已移除方案

### 规则自动建图（已删除）

**移除原因**：
- ❌ 容易撞墙
- ❌ 可能掉出地图
- ❌ 覆盖不完整
- ❌ 不适合评估环境的特殊起点

**替代方案**：
- 如需自动化 → 使用 LLM 智能建图
- 如需可靠性 → 使用手动建图

---

## 🎯 推荐决策树

```
需要建图
    │
    ├─ 追求最快最可靠？
    │   └─ YES → 手动建图 ⭐⭐⭐⭐⭐
    │
    ├─ 想尝试 AI 技术？
    │   └─ YES → LLM 智能建图 🤖
    │
    └─ 不确定？
        └─ 默认 → 手动建图 ⭐⭐⭐⭐⭐
```

---

## 📊 方案对比

| 特性 | 手动建图 | LLM 智能建图 |
|------|---------|-------------|
| **速度** | ⭐⭐⭐⭐⭐ 3-5分钟 | ⭐⭐⭐ 10分钟 |
| **可靠性** | ⭐⭐⭐⭐⭐ 最高 | ⭐⭐⭐⭐⭐ 极高 |
| **质量** | ⭐⭐⭐⭐⭐ 完全可控 | ⭐⭐⭐⭐ 系统化 |
| **难度** | ⭐⭐⭐ 需要操作 | ⭐⭐⭐⭐⭐ 自动 |
| **技术要求** | ⭐⭐⭐⭐⭐ 无 | ⭐⭐⭐⭐ 仅需 API Key |
| **创新性** | ⭐⭐ 传统 | ⭐⭐⭐⭐⭐ AI 驱动 |
| **成本** | ⭐⭐⭐⭐⭐ 免费 | ⭐⭐⭐⭐⭐ <1分钱 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

---

## 📁 文档索引

### 手动建图相关
- [正确的建图步骤.md](正确的建图步骤.md) - 完整指南
- [建图命令.sh](建图命令.sh) - 命令速查
- [为什么推荐手动建图.md](为什么推荐手动建图.md) - 详细分析

### LLM 智能建图相关
- [LLM建图-OpenAI配置.md](LLM建图-OpenAI配置.md) - **OpenAI API 配置（推荐）**
- [LLM智能建图指南.md](LLM智能建图指南.md) - 完整指南
- [llm建图-检查环境.sh](llm建图-检查环境.sh) - 环境检查（已弃用 Ollama）

### 其他
- [CLAUDE.md](CLAUDE.md) - 项目总体指南
- [README.md](README.md) - 项目说明

---

## 🚀 快速开始

### 如果你是第一次建图

**推荐：使用手动建图**

```bash
# 1. 查看命令
./建图命令.sh

# 2. 按照指示在 4 个终端中执行命令

# 3. 手动遥控覆盖环境（3-5分钟）

# 4. 保存地图
ros2 run nav2_map_server map_saver_cli -f solution/config/map2 \
  --ros-args -r map:=/robot1/map
```

### 如果你想尝试 AI

**尝试：LLM 智能建图（OpenAI API）**

```bash
# 1. 安装依赖
pip install openai

# 2. 设置 API Key（选择一个）
export OPENAI_API_KEY="sk-your-key-here"
export OPENAI_API_BASE="https://api.openai.com/v1"  # 或 DeepSeek/通义千问
export OPENAI_MODEL="gpt-4o-mini"

# 3. 运行 LLM 建图
ros2 run solution llm_mapper --ros-args --remap __ns:=/robot1
```

**获取 API Key**：
- OpenAI: https://platform.openai.com/
- DeepSeek: https://platform.deepseek.com/
- 通义千问: https://dashscope.aliyun.com/

详见：[LLM建图-OpenAI配置.md](LLM建图-OpenAI配置.md)

---

## ✅ 验证地图

保存地图后，检查文件：

```bash
ls -lh solution/config/map2.*
```

应该看到：
- `map2.pgm` - 地图图像
- `map2.yaml` - 地图配置

测试地图：

```bash
ros2 launch solution solution_launch.py \
  num_robots:=1 \
  random_seed:=42 \
  use_nav2:=true \
  headless:=false
```

---

## 💬 建议

**对于 AURO2025 评估项目**：

1. **首选：手动建图**
   - 最快、最可靠、质量最高
   - 适合需要确保成功的场景

2. **可选：LLM 智能建图**
   - 适合技术探索
   - 需要额外的环境配置
   - 时间充裕时可以尝试

3. **不建议：自动建图**
   - 已移除，不再支持
   - 问题太多，不适合这个环境

---

## 📞 获取帮助

遇到问题时：

1. **手动建图问题** → 查看 [正确的建图步骤.md](正确的建图步骤.md) 的故障排查部分
2. **LLM 建图问题** → 查看 [LLM智能建图指南.md](LLM智能建图指南.md) 的故障排查部分
3. **通用问题** → 查看 [为什么推荐手动建图.md](为什么推荐手动建图.md)

---

**最后更新**：2025-12-30

**状态**：✅ 稳定版本，推荐使用
